<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Rose Quartz 3D - Pro Edition</title>
    <style>
        :root {
            --pink-core: #ff85a1;
            --pink-glow: rgba(255, 133, 161, 0.6);
            --bg-color: #0d0208;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: var(--bg-color);
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1200px;
            /* 改善手机端字体渲染 */
            -webkit-font-smoothing: antialiased;
            /* 禁止系统默认触摸行为（如翻页） */
            touch-action: none; 
        }

        /* 宇宙背景 */
        .universe {
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #1a050d 0%, #050103 100%);
            z-index: 0;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.5;
            animation: twinkle var(--d) infinite ease-in-out;
        }

        @keyframes twinkle { 0%, 100% { opacity: 0.3; } 50% { opacity: 1; } }

        /* 流星特效 */
        .meteor-container {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        .shooting-star {
            position: absolute;
            width: 2px;
            height: 120px;
            background: linear-gradient(to top, rgba(255,255,255,0.8), var(--pink-core), rgba(255, 133, 161, 0));
            opacity: 0;
            transform: rotate(45deg); 
            filter: drop-shadow(0 0 6px var(--pink-core));
            animation: shoot-diagonal 2.5s ease-out forwards;
            will-change: transform, opacity;
        }

        @keyframes shoot-diagonal {
            0% { transform: translate(0, 0) rotate(45deg); opacity: 0; }
            10% { opacity: 1; }
            40% { transform: translate(-800px, 800px) rotate(45deg); opacity: 0; }
            100% { opacity: 0; }
        }

        /* 3D主体 */
        .scene {
            position: relative;
            width: 80vw;
            height: 80vw;
            max-width: 400px;
            max-height: 400px;
            z-index: 10;
            transform-style: preserve-3d;
            /* 缩短 transition 提高跟手性 */
            transition: transform 0.08s ease-out; 
            will-change: transform;
            backface-visibility: hidden;
        }

        .heart-layer {
            position: absolute;
            width: 100%;
            height: 100%;
            fill: none;
            stroke: var(--pink-core);
            stroke-width: 3;
            stroke-linecap: round;
            filter: drop-shadow(0 0 8px var(--pink-glow));
            transform-style: preserve-3d;
            shape-rendering: geometricPrecision;
        }

        /* 底部霓虹圈 */
        .floor-glow {
            position: absolute;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%) rotateX(75deg);
            width: 60vw;
            height: 60vw;
            max-width: 300px;
            max-height: 300px;
            border: 6px solid var(--pink-core);
            border-radius: 50%;
            filter: blur(4px) drop-shadow(0 0 20px var(--pink-glow));
            opacity: 0.5;
            animation: ringPulse 3s infinite ease-in-out;
        }

        .floor-glow.inner { width: 40vw; height: 40vw; max-width: 220px; max-height: 220px; animation-delay: 0.5s; }

        @keyframes ringPulse {
            0%, 100% { opacity: 0.3; transform: translateX(-50%) rotateX(75deg) scale(0.9); }
            50% { opacity: 0.7; transform: translateX(-50%) rotateX(75deg) scale(1.1); }
        }

        .text-container {
            position: absolute;
            bottom: -70px;
            width: 100%;
            text-align: center;
            font-family: 'Cinzel', serif;
            color: #ffb3c1;
            letter-spacing: 0.5em;
            font-size: 12px;
            text-shadow: 0 0 10px var(--pink-glow);
        }
    </style>
</head>
<body>

    <div class="universe" id="universe"></div>
    <div class="meteor-container" id="meteor-container"></div>

    <div class="scene" id="scene">
        <div id="heart-layers"></div>
        <div class="floor-glow"></div>
        <div class="floor-glow inner"></div>
        <div class="text-container">ROSE QUARTZ ESSENCE</div>
    </div>

    <script>
        // 1. 初始化星空
        const universe = document.getElementById('universe');
        const starCount = window.innerWidth < 768 ? 60 : 120;
        for (let i = 0; i < starCount; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            const size = (Math.random() * 1.5 + 0.5) + 'px';
            star.style.width = size;
            star.style.height = size;
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.setProperty('--d', Math.random() * 3 + 2 + 's');
            universe.appendChild(star);
        }

        // 2. 流星生成 (右上 -> 左下)
        const meteorContainer = document.getElementById('meteor-container');
        function createMeteor() {
            const meteor = document.createElement('div');
            meteor.className = 'shooting-star';
            meteor.style.left = (Math.random() * 50 + 60) + '%';
            meteor.style.top = (Math.random() * 30 - 20) + '%';
            meteorContainer.appendChild(meteor);
            setTimeout(() => meteor.remove(), 2500);
        }
        function startMeteors() {
            createMeteor();
            setTimeout(startMeteors, Math.random() * 3000 + 2000);
        }
        startMeteors();

        // 3. 绘制3D心形层
        const layersBox = document.getElementById('heart-layers');
        const heartPath = "M100,165 C100,165 25,120 25,72 C25,45 52,35 75,48 C85,54 95,68 100,78 C105,68 115,54 125,48 C148,35 175,45 175,72 C175,115 100,165 100,165 Z";
        
        for (let i = 0; i < 15; i++) {
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("viewBox", "0 0 200 200");
            svg.classList.add("heart-layer");
            
            const depth = (i - 7.5) * (window.innerWidth < 768 ? 4 : 6); 
            const scale = 1 - Math.abs(i - 7.5) * 0.03;
            svg.style.transform = `translateZ(${depth}px) scale(${scale})`;
            svg.style.opacity = 1 - Math.abs(i - 7.5) * 0.1;
            
            const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
            path.setAttribute("d", heartPath);
            if (i === 0 || i === 14) path.style.stroke = "#fff";
            svg.appendChild(path);
            layersBox.appendChild(svg);
        }

        // 4. 高灵敏度交互逻辑
        const scene = document.getElementById('scene');
        let ticking = false;

        function updatePerspective(x, y) {
            // 降低分母数值，极大提升跟手灵敏度
            const sensitivity = window.innerWidth < 768 ? 6 : 12; 
            const xAxis = (window.innerWidth / 2 - x) / sensitivity;
            const yAxis = (window.innerHeight / 2 - y) / sensitivity;
            scene.style.transform = `rotateY(${-xAxis}deg) rotateX(${yAxis}deg)`;
        }

        // 帧同步处理，防止手机端高频触发卡顿
        function onMove(x, y) {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    updatePerspective(x, y);
                    ticking = false;
                });
                ticking = true;
            }
        }

        document.addEventListener('mousemove', (e) => onMove(e.pageX, e.pageY));
        
        document.addEventListener('touchmove', (e) => {
            if (e.touches.length > 0) {
                onMove(e.touches[0].pageX, e.touches[0].pageY);
            }
        }, { passive: true });
    </script>
</body>
</html>
